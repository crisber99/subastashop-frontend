<div class="container mt-5">
  <h1 class="mb-4">Cat√°logo üõçÔ∏è</h1>
  <div class="row">
    @for (producto of productos; track producto.id) {
      <div class="col-md-4 mb-4">
        <div class="card h-100 shadow-sm">
          
          <img [src]="producto.imagenUrl || producto.urlImagen" class="card-img-top" alt="Producto" style="height: 200px; object-fit: cover;">
          
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">{{ producto.nombre }}</h5>
            
            @if (producto.tipoVenta === 'SUBASTA' || producto.estado === 'SUBASTA') {
              <span class="badge bg-danger mb-2 align-self-start">üî• Subasta</span>
              <p class="card-text fw-bold">Oferta actual: ${{ producto.precioActual | number }}</p>
            } @else {
              <span class="badge bg-success mb-2 align-self-start">Venta Directa</span>
              <p class="card-text fw-bold">Precio: ${{ producto.precioBase | number }}</p>
            }
            
            <p class="text-muted small flex-grow-1">{{ producto.descripcion }}</p>
            
            <a [routerLink]="['/producto', producto.id]" class="btn btn-primary w-100 mb-2">Ver Detalle</a>

            @if (authService.isAdmin()) {
                <div class="border-top pt-2 mt-auto">
                    @if (producto.estado !== 'SUBASTA' && producto.estado !== 'ADJUDICADO' && producto.estado !== 'PAGADO') {
                        <a [routerLink]="['/admin/editar', producto.id]" class="btn btn-outline-warning w-100 btn-sm fw-bold">
                            ‚úèÔ∏è Editar Producto
                        </a>
                    } @else {
                        <button class="btn btn-secondary w-100 btn-sm" disabled>
                            üîí Bloqueado ({{ producto.estado }})
                        </button>
                    }
                </div>
            }

          </div>
        </div>
      </div>
    }
  </div>
</div>